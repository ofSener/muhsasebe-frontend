<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yenileme Takibi - IHSAN AI</title>
  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="gradient-mesh"></div>
  <div class="app-container">
    <aside class="sidebar" id="sidebar"></aside>

    <main class="main-content">
      <nav class="navbar">
        <div class="navbar-left">
          <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Menü">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          <div class="navbar-breadcrumb">
            <span class="breadcrumb-item">Müşterilerimiz</span>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-item active">Yenileme Takibi</span>
          </div>
        </div>
        <div class="navbar-right">
          <button class="navbar-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 01-3.46 0"/>
            </svg>
            <span class="badge">3</span>
          </button>
          <div class="navbar-divider"></div>
          <div class="navbar-user">
            <div class="navbar-avatar"></div>
            <div class="navbar-user-info">
              <div class="navbar-user-name">Yükleniyor...</div>
              <div class="navbar-user-role"></div>
            </div>
          </div>
        </div>
      </nav>

      <div class="page-wrapper">
        <div class="page-content rn-page">

          <!-- ─── Header ─── -->
          <div class="rn-header">
            <div class="rn-header-left">
              <h1 class="rn-title">Yenileme Takibi</h1>
              <p class="rn-subtitle">Yaklaşan poliçe yenilemelerini takip edin ve müşterilerinize ulaşın</p>
            </div>
            <div class="rn-header-actions">
              <button class="rn-btn rn-btn--outline" id="btnExcelExport">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                  <polyline points="7,10 12,15 17,10"/>
                  <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Excel
              </button>
              <button class="rn-btn rn-btn--primary" id="btnBulkAutoQuote">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                </svg>
                Toplu Teklif
              </button>
            </div>
          </div>

          <!-- ─── Toolbar: Stats + Filters ─── -->
          <div class="rn-toolbar" id="renewalToolbar">
            <div class="rn-toolbar-row">
              <!-- Urgency Chips -->
              <div class="rn-chips">
                <button class="rn-chip rn-chip--critical" data-filter="7">
                  <span class="rn-chip-dot"></span>
                  <strong id="count-7">0</strong>
                  <span>Kritik</span>
                </button>
                <button class="rn-chip rn-chip--warning" data-filter="15">
                  <span class="rn-chip-dot"></span>
                  <strong id="count-15">0</strong>
                  <span>Yaklaşan</span>
                </button>
                <button class="rn-chip rn-chip--info" data-filter="30">
                  <span class="rn-chip-dot"></span>
                  <strong id="count-30">0</strong>
                  <span>30 Gün</span>
                </button>
                <button class="rn-chip rn-chip--revenue" data-filter="all">
                  <strong id="count-revenue">0 TL</strong>
                  <span>Potansiyel</span>
                </button>
              </div>

              <div class="rn-toolbar-sep"></div>

              <!-- Filters -->
              <div class="rn-filters">
                <div class="rn-search-wrap">
                  <svg class="rn-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="M21 21l-4.35-4.35"/>
                  </svg>
                  <input type="text" id="searchInput" placeholder="Müşteri, plaka, poliçe no..." class="rn-search">
                </div>
                <select id="filterCompany" class="rn-select">
                  <option value="">Tüm Şirketler</option>
                </select>
                <select id="filterType" class="rn-select">
                  <option value="">Tüm Türler</option>
                </select>
                <select id="sortBy" class="rn-select">
                  <option value="BitisTarihi_asc">Bitiş ↑</option>
                  <option value="BitisTarihi_desc">Bitiş ↓</option>
                  <option value="BrutPrim_desc">Prim ↓</option>
                  <option value="BrutPrim_asc">Prim ↑</option>
                </select>
                <button class="rn-reset-btn" id="btnResetFilters" title="Filtreleri Sıfırla">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15">
                    <polyline points="1,4 1,10 7,10"/>
                    <path d="M3.51 15a9 9 0 102.13-9.36L1 10"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <!-- ─── Table ─── -->
          <div class="rn-table-wrap">
            <div class="rn-table-info">
              <span class="rn-result-count"><strong id="tableResultCount">0</strong> poliçe</span>
            </div>

            <div class="rn-table-scroll">
              <table class="rn-table">
                <thead>
                  <tr>
                    <th class="rn-th--urgency"></th>
                    <th class="rn-th--days">Kalan</th>
                    <th class="rn-th--customer">Müşteri</th>
                    <th class="rn-th--type">Tür</th>
                    <th class="rn-th--plate">Plaka / No</th>
                    <th class="rn-th--company">Şirket</th>
                    <th class="rn-th--date">Bitiş</th>
                    <th class="rn-th--premium">Prim</th>
                    <th class="rn-th--actions">İşlem</th>
                  </tr>
                </thead>
                <tbody id="policiesBody">
                  <tr>
                    <td colspan="9">
                      <div class="rn-loading">
                        <div class="rn-spinner"></div>
                        <span>Poliçeler yükleniyor...</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="rn-pagination" id="paginationContainer" style="display: none;">
              <div class="rn-pagination-info" id="paginationInfo"></div>
              <div class="rn-pagination-controls" id="paginationControls"></div>
            </div>
          </div>

          <!-- ─── Dev Test Panel (hidden by default) ─── -->
          <div class="test-panel" id="testPanel" style="display: none;">
            <div class="test-panel-header" onclick="toggleTestPanel()">
              <div class="test-panel-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                  <path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/>
                </svg>
                Dev: Manuel Teklif Test
              </div>
              <svg class="test-panel-chevron" id="testPanelChevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <polyline points="6,9 12,15 18,9"/>
              </svg>
            </div>
            <div class="test-panel-body" id="testPanelBody" style="display: none;">
              <p class="test-panel-desc">Teklif türü seçin, gerekli bilgileri doldurun ve test edin.</p>
              <div class="test-form-grid">
                <div class="modal-field">
                  <label class="modal-label">Teklif Türü *</label>
                  <select id="testQuoteType" class="modal-select" onchange="onTestQuoteTypeChange()">
                    <option value="traffic">Trafik</option>
                    <option value="casco">Kasko</option>
                    <option value="imm">İMM</option>
                    <option value="dask">DASK</option>
                    <option value="house">Konut</option>
                    <option value="tss">TSS (Sağlık)</option>
                  </select>
                </div>
                <div class="modal-field">
                  <label class="modal-label">TC Kimlik No *</label>
                  <input type="text" id="testTcKimlikNo" class="modal-input" placeholder="11 haneli TC" maxlength="11" inputmode="numeric">
                </div>
                <div class="modal-field">
                  <label class="modal-label">Telefon</label>
                  <input type="text" id="testTelefon" class="modal-input" placeholder="5xxxxxxxxx" maxlength="10" inputmode="numeric">
                </div>
              </div>
              <div id="testVehicleFields">
                <div class="test-section-label">Araç Bilgileri</div>
                <div class="test-form-grid">
                  <div class="modal-field">
                    <label class="modal-label">Plaka *</label>
                    <input type="text" id="testPlaka" class="modal-input" placeholder="34ABC123" style="text-transform: uppercase;">
                  </div>
                </div>
              </div>
              <div id="testTssFields" style="display: none;">
                <div class="test-section-label">Sağlık (TSS) Bilgileri</div>
                <div class="test-form-grid">
                  <div class="modal-field">
                    <label class="modal-label">Sigortalı Adı *</label>
                    <input type="text" id="testSigortaliAdi" class="modal-input" placeholder="Ad Soyad">
                  </div>
                  <div class="modal-field">
                    <label class="modal-label">Doğum Tarihi *</label>
                    <input type="date" id="testTssDogumTarihi" class="modal-input">
                  </div>
                  <div class="modal-field">
                    <label class="modal-label">Boy (cm)</label>
                    <input type="number" id="testTssBoy" class="modal-input" placeholder="175">
                  </div>
                  <div class="modal-field">
                    <label class="modal-label">Kilo (kg)</label>
                    <input type="number" id="testTssKilo" class="modal-input" placeholder="80">
                  </div>
                  <div class="modal-field">
                    <label class="modal-label">Ağ Tipi</label>
                    <select id="testTssAgTipi" class="modal-select">
                      <option value="">Seçiniz</option>
                      <option value="1">Geniş Ağ</option>
                      <option value="2">Ekonomik Ağ</option>
                    </select>
                  </div>
                  <div class="modal-field">
                    <label class="modal-label">Plan Tipi</label>
                    <select id="testTssPlanTipi" class="modal-select">
                      <option value="">Seçiniz</option>
                      <option value="1">Bireysel</option>
                      <option value="2">Aile</option>
                    </select>
                  </div>
                  <div class="modal-field" style="display:flex;align-items:center;gap:0.5rem;padding-top:1.5rem;">
                    <input type="checkbox" id="testTssDogumTeminati" style="width:16px;height:16px;accent-color:var(--primary);">
                    <label class="modal-label" for="testTssDogumTeminati" style="margin:0;cursor:pointer;">Doğum Teminatı</label>
                  </div>
                </div>
              </div>
              <div id="testDaskFields" style="display: none;">
                <div class="test-section-label">DASK Bilgileri</div>
                <div class="test-form-grid">
                  <div class="modal-field" style="grid-column:1/-1;"><label class="modal-label">Bina Adresi</label><input type="text" id="testDaskBinaAdresi" class="modal-input" placeholder="Bina adresi"></div>
                  <div class="modal-field"><label class="modal-label">UAVT Kodu</label><input type="text" id="testDaskUAVTKodu" class="modal-input" placeholder="UAVT"></div>
                  <div class="modal-field"><label class="modal-label">Brüt m2</label><input type="number" id="testDaskBrutM2" class="modal-input" placeholder="120"></div>
                  <div class="modal-field"><label class="modal-label">İnşaat Yılı</label><input type="number" id="testDaskInsaatYili" class="modal-input" placeholder="2005"></div>
                  <div class="modal-field"><label class="modal-label">Toplam Kat</label><input type="number" id="testDaskToplamKat" class="modal-input" placeholder="5"></div>
                  <div class="modal-field"><label class="modal-label">Bulunduğu Kat</label><input type="number" id="testDaskBulunduguKat" class="modal-input" placeholder="3"></div>
                  <div class="modal-field"><label class="modal-label">Yapı Tarzı</label><select id="testDaskYapiTarzi" class="modal-select"><option value="">Seçiniz</option><option value="1">Çelik/Betonarme</option><option value="2">Diğer</option></select></div>
                  <div class="modal-field"><label class="modal-label">Kullanım</label><select id="testDaskKullanimSekli" class="modal-select"><option value="">Seçiniz</option><option value="1">Mesken</option><option value="2">İşyeri</option></select></div>
                  <div class="modal-field"><label class="modal-label">Mevcut Poliçe No</label><input type="text" id="testDaskMevcutPoliceNo" class="modal-input"></div>
                </div>
              </div>
              <div id="testHouseFields" style="display: none;">
                <div class="test-section-label">Konut Bilgileri</div>
                <div class="test-form-grid">
                  <div class="modal-field" style="grid-column:1/-1;"><label class="modal-label">Bina Adresi</label><input type="text" id="testHouseBinaAdresi" class="modal-input" placeholder="Bina adresi"></div>
                  <div class="modal-field"><label class="modal-label">UAVT Kodu</label><input type="text" id="testHouseUAVTKodu" class="modal-input"></div>
                  <div class="modal-field"><label class="modal-label">Brüt m2</label><input type="number" id="testHouseBrutM2" class="modal-input" placeholder="120"></div>
                  <div class="modal-field"><label class="modal-label">İnşaat Yılı</label><input type="number" id="testHouseInsaatYili" class="modal-input" placeholder="2005"></div>
                  <div class="modal-field"><label class="modal-label">Toplam Kat</label><input type="number" id="testHouseToplamKat" class="modal-input" placeholder="5"></div>
                  <div class="modal-field"><label class="modal-label">Bulunduğu Kat</label><input type="number" id="testHouseBulunduguKat" class="modal-input" placeholder="3"></div>
                  <div class="modal-field"><label class="modal-label">Yapı Tarzı</label><select id="testHouseYapiTarzi" class="modal-select"><option value="">Seçiniz</option><option value="1">Çelik/Betonarme</option><option value="2">Diğer</option></select></div>
                  <div class="modal-field"><label class="modal-label">Bina Beyan Değeri</label><input type="number" id="testHouseBinaBeyanDegeri" class="modal-input" placeholder="500000"></div>
                  <div class="modal-field"><label class="modal-label">Eşya Beyan Değeri</label><input type="number" id="testHouseEsyaBeyanDegeri" class="modal-input" placeholder="100000"></div>
                </div>
              </div>
              <div id="testLogContainer" style="display: none;">
                <div class="test-section-label">Sonuç Logu</div>
                <div class="test-log" id="testLog"></div>
              </div>
              <div class="test-panel-actions">
                <button class="rn-btn rn-btn--primary" id="btnTestQuote" onclick="submitTestQuote()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><polygon points="5,3 19,12 5,21 5,3"/></svg>
                  Test Gönder
                </button>
                <button class="rn-btn rn-btn--outline" onclick="clearTestLog()">Logu Temizle</button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </main>
  </div>

  <!-- ═══ TC Kimlik Atama Modal ═══ -->
  <div class="modal" id="tcAssignModal">
    <div class="modal-overlay"></div>
    <div class="modal-content" style="max-width: 480px;">
      <div class="modal-header">
        <div>
          <h3>TC Kimlik Bilgisi Gerekli</h3>
          <p id="tcAssignSubtitle" style="font-size:0.8125rem;color:var(--text-secondary);margin:0.25rem 0 0 0;"></p>
        </div>
        <button class="modal-close" onclick="closeTcAssignModal()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="tc-assign-info">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px;flex-shrink:0;color:var(--warning);">
            <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span>Teklif çalıştırmak için TC Kimlik No veya Vergi No gereklidir.</span>
        </div>
        <div class="modal-field" style="margin-top:1.25rem;">
          <label class="modal-label">TC Kimlik No</label>
          <input type="text" id="tcAssignInput" class="modal-input" placeholder="11 haneli TC Kimlik No" maxlength="11" inputmode="numeric">
        </div>
        <div class="tc-assign-divider"><span>veya</span></div>
        <div class="modal-field">
          <label class="modal-label">Vergi No</label>
          <input type="text" id="vknAssignInput" class="modal-input" placeholder="10 haneli Vergi No" maxlength="10" inputmode="numeric">
        </div>
        <div id="tcAssignCustomerLink" class="tc-assign-customer-link" style="display:none;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px;flex-shrink:0;"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          <span>Bu poliçenin müşteri kartı mevcut.</span>
          <a id="tcAssignCustomerDetailLink" href="#" target="_blank">Müşteri Kartını Aç</a>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-outline" onclick="closeTcAssignModal()">İptal</button>
        <button class="btn-modal btn-primary" id="btnSaveAndQuote" onclick="saveAndQuote()">Kaydet ve Teklif Çalış</button>
      </div>
    </div>
  </div>

  <!-- ═══ Bulk Auto Quote Modal ═══ -->
  <div class="modal" id="bulkAutoQuoteModal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Otomatik Teklif Çalış</h3>
        <button class="modal-close" onclick="closeBulkAutoQuoteModal()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Bitiş süresi yaklaşan poliçeler için otomatik teklif oluştur</p>
        <div class="modal-field">
          <label class="modal-label">Bitiş Süresi</label>
          <select id="bulkDaysFilter" class="modal-select">
            <option value="7">7 Gün İçinde</option>
            <option value="15">15 Gün İçinde</option>
            <option value="30">30 Gün İçinde</option>
          </select>
        </div>
        <div class="modal-field">
          <label class="modal-label">Poliçe Türleri</label>
          <div class="checkbox-group" id="bulkBranchesCheckboxes"></div>
        </div>
        <div class="modal-stats">
          <div class="modal-stat">
            <div class="modal-stat-value" id="bulkQuoteCount">0</div>
            <div class="modal-stat-label">Seçili Poliçe</div>
          </div>
          <div class="modal-stat">
            <div class="modal-stat-value" id="bulkQuoteRevenue">0 TL</div>
            <div class="modal-stat-label">Toplam Prim</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-outline" onclick="closeBulkAutoQuoteModal()">İptal</button>
        <button class="btn-modal btn-primary" onclick="executeBulkAutoQuote()">Teklif Çalış</button>
      </div>
    </div>
  </div>

  <!-- ═══ DASK/Konut Extra Info Modal ═══ -->
  <div class="modal" id="daskHouseFormModal">
    <div class="modal-overlay"></div>
    <div class="modal-content" style="max-width:640px;">
      <div class="modal-header">
        <h3 id="daskHouseFormTitle">Ek Bilgiler</h3>
        <button class="modal-close" onclick="closeDaskHouseForm()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Teklif oluşturmak için ek bina bilgilerini girin</p>
        <div class="form-grid">
          <div class="modal-field"><label class="modal-label">Bina Adresi</label><input type="text" id="daskBinaAdresi" class="modal-input" placeholder="Atatürk Mah. Cumhuriyet Cad. No:1"></div>
          <div class="modal-field"><label class="modal-label">UAVT Kodu</label><input type="text" id="daskUAVTKodu" class="modal-input" placeholder="UAVT adres kodu"></div>
          <div class="modal-field half"><label class="modal-label">Brüt m²</label><input type="number" id="daskBrutM2" class="modal-input" placeholder="120"></div>
          <div class="modal-field half"><label class="modal-label">İnşaat Yılı</label><input type="number" id="daskInsaatYili" class="modal-input" placeholder="2005"></div>
          <div class="modal-field half"><label class="modal-label">Toplam Kat Sayısı</label><input type="number" id="daskToplamKat" class="modal-input" placeholder="5"></div>
          <div class="modal-field half"><label class="modal-label">Bulunduğu Kat</label><input type="number" id="daskBulunduguKat" class="modal-input" placeholder="3"></div>
          <div class="modal-field half"><label class="modal-label">Yapı Tarzı</label><select id="daskYapiTarzi" class="modal-select"><option value="">Seçiniz</option><option value="1">Çelik / Betonarme</option><option value="2">Diğer</option></select></div>
          <div class="modal-field half" id="daskKullanimSekliField"><label class="modal-label">Kullanım Şekli</label><select id="daskKullanimSekli" class="modal-select"><option value="">Seçiniz</option><option value="1">Mesken</option><option value="2">İşyeri</option></select></div>
          <div class="modal-field half" id="daskPoliceNoField"><label class="modal-label">Mevcut DASK Poliçe No</label><input type="text" id="daskMevcutPoliceNo" class="modal-input"></div>
          <div class="modal-field half konut-only" style="display:none;"><label class="modal-label">Bina Beyan Değeri (TL)</label><input type="number" id="daskBinaBeyanDegeri" class="modal-input" placeholder="500000"></div>
          <div class="modal-field half konut-only" style="display:none;"><label class="modal-label">Eşya Beyan Değeri (TL)</label><input type="number" id="daskEsyaBeyanDegeri" class="modal-input" placeholder="100000"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-outline" onclick="closeDaskHouseForm()">İptal</button>
        <button class="btn-modal btn-primary" id="btnSubmitDaskHouse" onclick="submitDaskHouseQuote()">Teklif Çalış</button>
      </div>
    </div>
  </div>

  <!-- ═══ TSS Extra Info Modal ═══ -->
  <div class="modal" id="tssFormModal">
    <div class="modal-overlay"></div>
    <div class="modal-content" style="max-width:560px;">
      <div class="modal-header">
        <h3>Sağlık Sigortası - Ek Bilgiler</h3>
        <button class="modal-close" onclick="closeTssForm()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-description">TSS teklifi için sağlık bilgilerini girin</p>
        <div class="form-grid">
          <div class="modal-field full"><label class="modal-label">Doğum Tarihi <span style="color:var(--danger);">*</span></label><input type="date" id="tssDogumTarihi" class="modal-input" required></div>
          <div class="modal-field half"><label class="modal-label">Boy (cm)</label><input type="number" id="tssBoy" class="modal-input" placeholder="175"></div>
          <div class="modal-field half"><label class="modal-label">Kilo (kg)</label><input type="number" id="tssKilo" class="modal-input" placeholder="80"></div>
          <div class="modal-field half"><label class="modal-label">Ağ Tipi</label><select id="tssAgTipi" class="modal-select"><option value="">Seçiniz</option><option value="1">Geniş Ağ</option><option value="2">Ekonomik Ağ</option></select></div>
          <div class="modal-field half"><label class="modal-label">Plan Tipi</label><select id="tssPlanTipi" class="modal-select"><option value="">Seçiniz</option><option value="1">Bireysel</option><option value="2">Aile</option></select></div>
          <div class="modal-field full"><label class="modal-label" style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;"><input type="checkbox" id="tssDogumTeminati" style="width:16px;height:16px;accent-color:var(--primary);"> Doğum Teminatı</label></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-modal btn-outline" onclick="closeTssForm()">İptal</button>
        <button class="btn-modal btn-primary" onclick="submitTssQuote()">Teklif Çalış</button>
      </div>
    </div>
  </div>

  <script src="../../assets/js/config.js"></script>
  <script src="../../assets/js/app.js"></script>
  <script src="../../components/base.js"></script>
  <script src="../../components/toast.js"></script>
  <script src="../../components/modal.js"></script>
  <script src="../../components/sidebar.js"></script>

  <style>
    /* ═══════════════════════════════════════════════════
       YENILEME TAKİBİ — Refined Utility Design
       ═══════════════════════════════════════════════════ */

    * { font-family: 'IBM Plex Sans', var(--font-sans), sans-serif !important; }
    .rn-mono { font-family: 'JetBrains Mono', var(--font-mono), monospace !important; }

    .rn-page { max-width: 1600px; margin: 0 auto; }

    /* ─── Header ─── */
    .rn-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }
    .rn-title {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0 0 0.25rem 0;
      color: var(--text-primary);
      letter-spacing: -0.025em;
    }
    .rn-subtitle {
      font-size: 0.875rem;
      color: var(--text-muted);
      margin: 0;
    }
    .rn-header-actions { display: flex; gap: 0.5rem; flex-shrink: 0; }

    /* ─── Buttons ─── */
    .rn-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.5rem 0.875rem;
      border-radius: var(--radius-sm);
      font-size: 0.8125rem;
      font-weight: 600;
      cursor: pointer;
      border: 1.5px solid transparent;
      transition: all var(--transition-fast);
      white-space: nowrap;
    }
    .rn-btn--outline {
      background: transparent;
      color: var(--text-secondary);
      border-color: var(--border-default);
    }
    .rn-btn--outline:hover {
      background: var(--bg-elevated);
      border-color: var(--border-strong);
      color: var(--text-primary);
    }
    .rn-btn--primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    .rn-btn--primary:hover {
      background: var(--primary-dim);
      box-shadow: 0 4px 12px var(--primary-glow);
    }

    /* ─── Toolbar ─── */
    .rn-toolbar {
      background: var(--bg-surface);
      border: 1.5px solid var(--border-default);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      position: sticky;
      top: var(--navbar-height);
      z-index: 20;
      backdrop-filter: blur(12px);
    }
    .rn-toolbar-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }
    .rn-toolbar-sep {
      width: 1px;
      height: 24px;
      background: var(--border-default);
      flex-shrink: 0;
    }

    /* ─── Urgency Chips ─── */
    .rn-chips { display: flex; gap: 0.375rem; flex-shrink: 0; }
    .rn-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.375rem 0.625rem;
      border-radius: 2rem;
      font-size: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      border: 1.5px solid transparent;
      background: var(--bg-elevated);
      color: var(--text-secondary);
      transition: all var(--transition-fast);
      white-space: nowrap;
    }
    .rn-chip:hover { border-color: var(--border-strong); }
    .rn-chip strong { font-variant-numeric: tabular-nums; }
    .rn-chip-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .rn-chip--critical .rn-chip-dot { background: var(--danger); }
    .rn-chip--warning .rn-chip-dot { background: var(--warning); }
    .rn-chip--info .rn-chip-dot { background: var(--info); }
    .rn-chip--revenue { background: var(--primary-glow); color: var(--primary); }

    .rn-chip.active {
      border-color: currentColor;
    }
    .rn-chip--critical.active { background: var(--danger-bg); color: var(--danger); border-color: var(--danger); }
    .rn-chip--warning.active { background: var(--warning-bg); color: var(--warning); border-color: var(--warning); }
    .rn-chip--info.active { background: var(--info-bg); color: var(--info); border-color: var(--info); }
    .rn-chip--revenue.active { background: var(--primary-intense); color: var(--primary-light); border-color: var(--primary); }

    /* ─── Filters ─── */
    .rn-filters { display: flex; gap: 0.5rem; flex: 1; min-width: 0; align-items: center; flex-wrap: wrap; }
    .rn-search-wrap {
      position: relative;
      flex: 1;
      min-width: 180px;
    }
    .rn-search-icon {
      position: absolute;
      left: 0.625rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-dim);
      pointer-events: none;
    }
    .rn-search {
      width: 100%;
      padding: 0.4375rem 0.625rem 0.4375rem 2rem;
      background: var(--bg-base);
      border: 1.5px solid var(--border-default);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-size: 0.8125rem;
      transition: border-color var(--transition-fast);
    }
    .rn-search:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-glow); }
    .rn-search::placeholder { color: var(--text-dim); }
    .rn-select {
      padding: 0.4375rem 0.5rem;
      background: var(--bg-base);
      border: 1.5px solid var(--border-default);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-size: 0.8125rem;
      cursor: pointer;
      min-width: 100px;
    }
    .rn-select:focus { outline: none; border-color: var(--primary); }
    .rn-reset-btn {
      padding: 0.4375rem;
      background: transparent;
      border: 1.5px solid var(--border-default);
      border-radius: var(--radius-sm);
      color: var(--text-dim);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-fast);
    }
    .rn-reset-btn:hover { background: var(--bg-elevated); color: var(--text-primary); border-color: var(--border-strong); }

    /* ─── Table Wrapper ─── */
    .rn-table-wrap {
      background: var(--bg-surface);
      border: 1.5px solid var(--border-default);
      border-radius: var(--radius-md);
      overflow: hidden;
    }
    .rn-table-info {
      padding: 0.625rem 1rem;
      border-bottom: 1px solid var(--border-subtle);
      font-size: 0.8125rem;
      color: var(--text-muted);
    }
    .rn-table-info strong { color: var(--primary); font-variant-numeric: tabular-nums; }
    .rn-table-scroll { overflow-x: auto; }

    /* ─── Table ─── */
    .rn-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8125rem;
    }
    .rn-table thead th {
      padding: 0.625rem 0.75rem;
      text-align: left;
      font-size: 0.6875rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-dim);
      background: var(--bg-elevated);
      border-bottom: 1.5px solid var(--border-default);
      white-space: nowrap;
      position: sticky;
      top: 0;
      z-index: 5;
    }
    .rn-th--urgency { width: 4px; padding: 0 !important; }
    .rn-th--days { width: 56px; text-align: center; }
    .rn-th--customer { min-width: 180px; }
    .rn-th--type { width: 80px; }
    .rn-th--plate { width: 120px; }
    .rn-th--company { width: 120px; }
    .rn-th--date { width: 90px; }
    .rn-th--premium { width: 90px; text-align: right; }
    .rn-th--actions { width: 140px; text-align: right; }

    /* ─── Table Rows ─── */
    .rn-row {
      transition: background var(--transition-fast);
    }
    .rn-row:hover {
      background: var(--bg-elevated);
    }
    .rn-row td {
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid var(--border-subtle);
      vertical-align: middle;
      color: var(--text-primary);
    }

    /* Urgency strip */
    .rn-row td:first-child {
      padding: 0;
      width: 4px;
      position: relative;
    }
    .rn-urgency-strip {
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 4px;
    }
    .rn-urgency-strip.critical { background: var(--danger); }
    .rn-urgency-strip.warning { background: var(--warning); }
    .rn-urgency-strip.normal { background: var(--info); }

    /* Days badge */
    .rn-days {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 36px;
      padding: 0.25rem 0.375rem;
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      font-weight: 700;
      font-variant-numeric: tabular-nums;
      text-align: center;
    }
    .rn-days.critical { background: var(--danger-bg); color: var(--danger); }
    .rn-days.warning { background: var(--warning-bg); color: var(--warning); }
    .rn-days.normal { background: var(--info-bg); color: var(--info); }

    /* Customer cell */
    .rn-customer-name {
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.8125rem;
      line-height: 1.3;
    }
    .rn-customer-phone {
      font-size: 0.6875rem;
      color: var(--text-dim);
      font-variant-numeric: tabular-nums;
      font-family: 'JetBrains Mono', var(--font-mono), monospace !important;
    }

    /* Type pill */
    .rn-type-pill {
      display: inline-flex;
      padding: 0.1875rem 0.5rem;
      border-radius: 2rem;
      font-size: 0.6875rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      white-space: nowrap;
    }

    /* Premium */
    .rn-premium {
      font-weight: 600;
      font-variant-numeric: tabular-nums;
      font-family: 'JetBrains Mono', var(--font-mono), monospace !important;
      font-size: 0.8125rem;
      text-align: right;
      white-space: nowrap;
    }

    /* Plate */
    .rn-plate {
      font-family: 'JetBrains Mono', var(--font-mono), monospace !important;
      font-size: 0.75rem;
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    /* Date */
    .rn-date {
      font-variant-numeric: tabular-nums;
      font-size: 0.8125rem;
      white-space: nowrap;
    }

    /* Actions */
    .rn-actions {
      display: flex;
      gap: 0.375rem;
      justify-content: flex-end;
    }
    .rn-act-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.3125rem 0.5rem;
      border-radius: var(--radius-sm);
      font-size: 0.6875rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all var(--transition-fast);
      white-space: nowrap;
    }
    .rn-act-btn svg { width: 12px; height: 12px; flex-shrink: 0; }
    .rn-act-quote {
      background: var(--primary);
      color: white;
    }
    .rn-act-quote:hover { background: var(--primary-dim); box-shadow: 0 2px 8px var(--primary-glow); }
    .rn-act-wa {
      background: #25D366;
      color: white;
      padding: 0.3125rem;
    }
    .rn-act-wa:hover { background: #20ba59; }

    /* ─── Expand Row ─── */
    .rn-expand td {
      padding: 0 !important;
      border-bottom: 1.5px solid var(--border-default);
      background: var(--bg-elevated);
    }
    .rn-expand-inner {
      padding: 1rem 1.25rem;
      animation: rnExpandIn 0.25s ease-out;
    }
    @keyframes rnExpandIn {
      from { opacity: 0; max-height: 0; padding-top: 0; padding-bottom: 0; }
      to { opacity: 1; max-height: 600px; }
    }
    .rn-expand-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    .rn-expand-title {
      font-size: 0.8125rem;
      font-weight: 700;
      color: var(--text-primary);
    }
    .rn-expand-status {
      display: inline-flex;
      align-items: center;
      gap: 0.375rem;
      padding: 0.25rem 0.625rem;
      border-radius: 2rem;
      font-size: 0.6875rem;
      font-weight: 600;
    }
    .rn-expand-status.processing {
      background: var(--info-bg);
      color: var(--info);
    }
    .rn-expand-status.completed {
      background: var(--success-bg);
      color: var(--success);
    }
    .rn-expand-close {
      background: none;
      border: none;
      color: var(--text-dim);
      cursor: pointer;
      padding: 0.25rem;
      border-radius: var(--radius-sm);
      transition: all var(--transition-fast);
    }
    .rn-expand-close:hover { background: var(--bg-overlay); color: var(--text-primary); }

    /* Quote Offers Grid */
    .rn-offers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 0.5rem;
    }
    .rn-offer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-sm);
      transition: border-color var(--transition-fast);
    }
    .rn-offer:hover { border-color: var(--border-strong); }
    .rn-offer-company {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-primary);
      max-width: 100px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .rn-offer-premium {
      font-family: 'JetBrains Mono', var(--font-mono), monospace !important;
      font-size: 0.8125rem;
      font-weight: 700;
      color: var(--text-primary);
      white-space: nowrap;
    }
    .rn-offer.cheapest {
      border-color: var(--success);
      background: var(--success-bg);
    }
    .rn-offer.cheapest .rn-offer-premium { color: var(--success); }
    .rn-offer.error { border-color: var(--danger); opacity: 0.6; }
    .rn-offer.error .rn-offer-premium { color: var(--danger); font-size: 0.6875rem; font-weight: 500; }
    .rn-offer.rejected .rn-offer-premium { color: var(--warning); }

    /* Expand loading */
    .rn-expand-loading {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 0;
      color: var(--text-muted);
      font-size: 0.8125rem;
    }
    .rn-expand-loading .rn-spinner { width: 20px; height: 20px; }

    /* ─── Spinner ─── */
    .rn-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid var(--border-default);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: rnSpin 0.7s linear infinite;
    }
    @keyframes rnSpin { to { transform: rotate(360deg); } }

    /* Pulsing dot for processing */
    .rn-pulse-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--info);
      animation: rnPulse 1.5s ease-in-out infinite;
    }
    @keyframes rnPulse {
      0%, 100% { opacity: 0.4; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* ─── Loading / Empty State ─── */
    .rn-loading, .rn-empty {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 2rem;
      gap: 0.75rem;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    /* ─── Pagination ─── */
    .rn-pagination {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1rem;
      border-top: 1px solid var(--border-subtle);
    }
    .rn-pagination-info { font-size: 0.8125rem; color: var(--text-muted); }
    .rn-pagination-controls { display: flex; gap: 0.25rem; }
    .rn-pg-btn {
      padding: 0.375rem 0.625rem;
      background: transparent;
      border: 1px solid var(--border-default);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-size: 0.8125rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-fast);
    }
    .rn-pg-btn:hover:not(:disabled) { background: var(--bg-elevated); border-color: var(--border-strong); }
    .rn-pg-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
    .rn-pg-btn:disabled { opacity: 0.35; cursor: not-allowed; }

    /* ─── Modals (shared) ─── */
    .modal { display: none; position: fixed; top:0; left:0; right:0; bottom:0; z-index: 10000; align-items: center; justify-content: center; }
    .modal.show { display: flex; }
    .modal-overlay { position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.55); backdrop-filter: blur(4px); }
    .modal-content { position: relative; width: 90%; max-width: 600px; background: var(--bg-surface); border-radius: var(--radius-lg); box-shadow: var(--shadow-xl); max-height: 90vh; overflow-y: auto; }
    .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border-default); }
    .modal-header h3 { font-size: 1.125rem; font-weight: 700; margin: 0; }
    .modal-close { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: transparent; border: none; color: var(--text-dim); cursor: pointer; border-radius: var(--radius-sm); transition: all var(--transition-fast); }
    .modal-close:hover { background: var(--bg-elevated); color: var(--text-primary); }
    .modal-close svg { width: 18px; height: 18px; }
    .modal-body { padding: 1.25rem 1.5rem; }
    .modal-description { color: var(--text-muted); margin-bottom: 1.25rem; font-size: 0.875rem; }
    .modal-field { margin-bottom: 1rem; }
    .modal-label { display: block; font-size: 0.8125rem; font-weight: 600; color: var(--text-secondary); margin-bottom: 0.375rem; }
    .modal-input, .modal-select { width: 100%; padding: 0.5rem 0.75rem; background: var(--bg-base); border: 1.5px solid var(--border-default); border-radius: var(--radius-sm); color: var(--text-primary); font-size: 0.8125rem; transition: border-color var(--transition-fast); }
    .modal-input:focus, .modal-select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-glow); }
    .modal-footer { display: flex; gap: 0.625rem; padding: 1rem 1.5rem; border-top: 1px solid var(--border-default); }
    .btn-modal { flex: 1; padding: 0.625rem 1.25rem; border-radius: var(--radius-sm); font-size: 0.875rem; font-weight: 600; cursor: pointer; transition: all var(--transition-fast); border: none; }
    .btn-modal.btn-outline { background: transparent; color: var(--text-secondary); border: 1.5px solid var(--border-default); }
    .btn-modal.btn-outline:hover { background: var(--bg-elevated); }
    .btn-modal.btn-primary { background: var(--primary); color: white; }
    .btn-modal.btn-primary:hover { background: var(--primary-dim); }

    /* TC Assign specifics */
    .tc-assign-info { display: flex; align-items: flex-start; gap: 0.5rem; padding: 0.75rem; background: var(--warning-bg); border: 1px solid rgba(245,158,11,0.2); border-radius: var(--radius-sm); font-size: 0.8125rem; color: var(--text-secondary); line-height: 1.5; }
    .tc-assign-divider { display: flex; align-items: center; gap: 0.75rem; margin: 0.75rem 0; color: var(--text-dim); font-size: 0.75rem; }
    .tc-assign-divider::before, .tc-assign-divider::after { content: ''; flex: 1; height: 1px; background: var(--border-default); }
    .tc-assign-customer-link { display: flex; align-items: center; gap: 0.5rem; padding: 0.625rem; margin-top: 0.75rem; background: var(--info-bg); border: 1px solid rgba(59,130,246,0.15); border-radius: var(--radius-sm); font-size: 0.8125rem; color: var(--text-secondary); }
    .tc-assign-customer-link a { color: var(--primary); font-weight: 600; text-decoration: none; margin-left: auto; }

    /* Form grid */
    .form-grid { display: flex; flex-wrap: wrap; gap: 0.75rem; }
    .form-grid .modal-field { width: 100%; margin-bottom: 0; }
    .form-grid .modal-field.half { width: calc(50% - 0.375rem); }
    .form-grid .modal-field.full { width: 100%; }

    /* Checkbox group */
    .checkbox-group { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 0.5rem; }
    .checkbox-item { display: flex; align-items: center; gap: 0.375rem; }
    .checkbox-item input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; accent-color: var(--primary); }
    .checkbox-item label { font-size: 0.8125rem; color: var(--text-primary); cursor: pointer; }

    /* Modal stats */
    .modal-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-top: 1rem; padding: 1rem; background: var(--bg-elevated); border-radius: var(--radius-sm); }
    .modal-stat { text-align: center; }
    .modal-stat-value { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); font-variant-numeric: tabular-nums; }
    .modal-stat-label { font-size: 0.75rem; color: var(--text-muted); margin-top: 0.125rem; }

    /* Bulk progress */
    .bulk-progress-container { margin-top: 0.75rem; }
    .bulk-progress-bar { width: 100%; height: 5px; background: var(--bg-overlay); border-radius: 3px; overflow: hidden; margin-bottom: 0.375rem; }
    .bulk-progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary-light)); border-radius: 3px; transition: width 0.3s ease; }
    .bulk-progress-text { font-size: 0.75rem; color: var(--text-muted); text-align: center; }

    /* ─── Test Panel ─── */
    .test-panel { margin-top: 1.5rem; background: var(--bg-surface); border: 1.5px solid var(--border-default); border-radius: var(--radius-md); overflow: hidden; }
    .test-panel-header { display: flex; align-items: center; justify-content: space-between; padding: 0.75rem 1rem; cursor: pointer; user-select: none; transition: background var(--transition-fast); }
    .test-panel-header:hover { background: var(--bg-elevated); }
    .test-panel-title { display: flex; align-items: center; gap: 0.5rem; font-size: 0.8125rem; font-weight: 600; color: var(--primary); }
    .test-panel-chevron { transition: transform var(--transition-fast); }
    .test-panel-body { padding: 0 1rem 1rem; border-top: 1px solid var(--border-subtle); }
    .test-panel-desc { font-size: 0.75rem; color: var(--text-muted); margin: 0.75rem 0; }
    .test-form-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 0.75rem; }
    .test-form-grid .modal-field { margin-bottom: 0; }
    .test-section-label { font-size: 0.6875rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; color: var(--primary); margin: 1rem 0 0.5rem; padding-bottom: 0.375rem; border-bottom: 2px solid var(--primary-glow); }
    .test-panel-actions { display: flex; gap: 0.5rem; margin-top: 1rem; padding-top: 0.75rem; border-top: 1px solid var(--border-subtle); }
    .test-log { background: var(--bg-elevated); border: 1px solid var(--border-default); border-radius: var(--radius-sm); padding: 0.5rem 0.75rem; max-height: 180px; overflow-y: auto; font-family: 'JetBrains Mono', var(--font-mono), monospace !important; font-size: 0.6875rem; line-height: 1.7; color: var(--text-secondary); }
    .test-log .log-entry { padding: 0.0625rem 0; border-bottom: 1px solid var(--border-subtle); }
    .test-log .log-entry:last-child { border-bottom: none; }
    .test-log .log-time { color: var(--primary); font-weight: 600; margin-right: 0.375rem; }
    .test-log .log-success { color: var(--success); }
    .test-log .log-error { color: var(--danger); }
    .test-log .log-info { color: var(--info); }

    /* ─── Responsive ─── */
    @media (max-width: 1024px) {
      .rn-toolbar-row { flex-wrap: wrap; }
      .rn-toolbar-sep { display: none; }
      .rn-chips { width: 100%; overflow-x: auto; padding-bottom: 0.25rem; }
      .rn-filters { width: 100%; }
    }
    @media (max-width: 768px) {
      .rn-header { flex-direction: column; }
      .rn-header-actions { width: 100%; }
      .rn-header-actions .rn-btn { flex: 1; justify-content: center; }
      .rn-select { min-width: 80px; }
      .rn-th--company, .rn-th--plate { display: none; }
      .rn-table .rn-row td:nth-child(5),
      .rn-table .rn-row td:nth-child(6) { display: none; }
      .form-grid .modal-field.half { width: 100%; }
    }
  </style>

  <script src="../../assets/js/pages/customers/renewals.js"></script>
</body>
</html>
